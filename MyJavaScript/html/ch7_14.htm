<html>
<head>
  <script language="javascript" src="js/util.js"></script>
  <script language="JavaScript"><!--
var errMsg = "";  // ȫ�ֱ��������ڴ�ų�����Ϣ
// ȫ�ֱ������飬���ڴ�ų������id
var allFormValidateFields = new Array();  
function validate() {
  doErrHighlight(isEmptyString(getObj("username").value), 
                  '������"�û���".\n', 
                   "username");
  doErrHighlight(isEmptyString(getObj("password").value), 
                    '������"����".\n', 
                    "password");
  doErrHighlight(!isValidString(getObj("username").value), 
                    '��Ч��"�û���" \n', 
                    "username");
  doErrHighlight(getObj("username").value!="" && !isMinString(getObj("username").value,6), 
                   '"�û���"����Ӧ����6���ַ� \n', 
                   "username");
  doErrHighlight(getObj("password").value!="" && !isMinString(getObj("password").value,6), 
                   '"����"����Ӧ����6���ַ� \n', 
                   "password");

  if (errMsg!="") {
    alert(errMsg);
    errMsg = "";
    allFormValidateFields = new Array();
    return false;
  }
}

function doErrHighlight(isError, s, id) {
  if (isError) {
    errMsg += s;  // ��������Ϣ��ӵ�ȫ�ֱ�����
    errHighlight(id,true);  // ����������
    addToAllFormValidateFields(id);  // ���������id��ӵ�ȫ�ֱ���������
  }
  else
    if (indexOfArray(allFormValidateFields,id)==-1) errHighlight(id,false);  // ���ھ����˴������ȡ�����Ч��
}

function addToAllFormValidateFields(id) {
  if (indexOfArray(allFormValidateFields,id)==-1)
    allFormValidateFields[allFormValidateFields.length] = id;
}
    function doSubmit() {
      if (validate()) getObj("mainForm").submit;
    }
  //--></script>
</head>
<body>
<form id="mainForm" method="post">
  <table>
    <tr>
      <td>�û���</td>
      <td><input type="text" name="username" id="username"></td>
    </tr>
    <tr>
      <td>����</td>
      <td><input type="password" name="password" id="password"></td>
    </tr>
    <tr>
      <td></td>
      <td align="right"><input type="button" value="�ύ" onclick="doSubmit();"></td>
    </tr>
  </table>
</form>
</body>
</html>
